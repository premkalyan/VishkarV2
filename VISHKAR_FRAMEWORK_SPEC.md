# VISHKAR Framework Specification

**Version:** 1.1.0
**Status:** Draft
**Last Updated:** 2025-12-22
**Authors:** VISHKAR Team

> **Revision 1.1.0**: Updated based on practical experience using VISHKAR MCPs,
> discovered MCP timeout issues, PR-Agent integration learnings, and SDLC refinements.

---

## Table of Contents

1. [Executive Summary](#1-executive-summary)
2. [Problem Statement](#2-problem-statement)
3. [Solution Overview](#3-solution-overview)
4. [Architecture](#4-architecture)
5. [Core Components](#5-core-components)
6. [User Workflows](#6-user-workflows)
7. [Execution Engine Abstraction](#7-execution-engine-abstraction)
8. [UI Specifications](#8-ui-specifications)
9. [API Design](#9-api-design)
10. [Data Model](#10-data-model)
11. [Integration Points](#11-integration-points)
12. [Codebase Understanding Module](#12-codebase-understanding-module)
13. [Security Considerations](#13-security-considerations)
14. [Deployment Model](#14-deployment-model)
15. [MVP vs Future Roadmap](#15-mvp-vs-future-roadmap)
16. [Technical Stack](#16-technical-stack)
17. [Known Issues & Lessons Learned](#17-known-issues--lessons-learned)

---

## 1. Executive Summary

### 1.1 What is VISHKAR?

VISHKAR is an **AI-powered software development framework** that provides structured methodology, specialized agents, and quality assurance for building software. Unlike other AI coding tools that focus solely on code generation, VISHKAR provides:

- **17-Step SDLC** - Proven software development lifecycle
- **38 Specialized Agents** - Domain experts for different concerns
- **4-Angle Review System** - Architecture, Security, Quality, Tech-Stack reviews
- **Engineering Standards** - Consistent patterns and best practices
- **Lessons Learned** - Continuous improvement from past mistakes

### 1.2 Unique Value Proposition

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Coding Tools Landscape                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   Claude Code, Aider,        VISHKAR Framework                         â”‚
â”‚   OpenHands, Cursor          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                    â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚   SDLC Process  â”‚                        â”‚
â”‚   â”‚  Code Generation â”‚        â”‚   + Standards   â”‚                        â”‚
â”‚   â”‚  + Execution     â”‚   +    â”‚   + Reviews     â”‚  =  Complete Solution â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚   + Agents      â”‚                        â”‚
â”‚                              â”‚   + Learnings   â”‚                        â”‚
â”‚        "The Hands"           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                   "The Brain"                           â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Target User

**Primary:** Solo Developer
- Wants AI assistance but with quality and structure
- Can't afford enterprise tools
- Needs to deliver production-ready code

**Future:** Teams â†’ Enterprise (license scaling)

---

## 2. Problem Statement

### 2.1 Current AI Coding Tool Limitations

| Problem | Impact |
|---------|--------|
| **No Process** | AI writes code without methodology, leading to inconsistent quality |
| **No Standards** | Each session starts fresh, no organizational knowledge |
| **No Review** | Security and architecture issues slip through |
| **No Learning** | Same mistakes repeated across sessions |
| **Lock-in** | Tied to one AI provider or IDE |

### 2.2 What Developers Actually Need

1. **Structure** - A proven process to follow
2. **Quality Gates** - Reviews before code reaches production
3. **Flexibility** - Choice of AI engine (Claude, Aider, OpenHands)
4. **Persistence** - Learnings that carry forward
5. **Integration** - Works with existing tools (JIRA, GitHub)

---

## 3. Solution Overview

### 3.1 VISHKAR Framework Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        VISHKAR Framework                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Web Application                             â”‚   â”‚
â”‚  â”‚  - Task Management          - SDLC Visualization                â”‚   â”‚
â”‚  â”‚  - Chat Interface           - Review Dashboard                  â”‚   â”‚
â”‚  â”‚  - Code Preview             - Standards Browser                 â”‚   â”‚
â”‚  â”‚                    (Built with Builder.io)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                    â”‚
â”‚                                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      VISHKAR API                                 â”‚   â”‚
â”‚  â”‚  - Workflow Orchestration   - State Management                  â”‚   â”‚
â”‚  â”‚  - Engine Abstraction       - Integration Hub                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â–¼                          â–¼                          â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   VISHKAR   â”‚          â”‚ Execution   â”‚          â”‚ Integration â”‚    â”‚
â”‚  â”‚    MCPs     â”‚          â”‚  Engines    â”‚          â”‚   Layer     â”‚    â”‚
â”‚  â”‚             â”‚          â”‚             â”‚          â”‚             â”‚    â”‚
â”‚  â”‚ - SDLC     â”‚          â”‚ - Claude    â”‚          â”‚ - JIRA      â”‚    â”‚
â”‚  â”‚ - Agents   â”‚          â”‚ - Aider     â”‚          â”‚ - GitHub    â”‚    â”‚
â”‚  â”‚ - Standardsâ”‚          â”‚ - OpenHands â”‚          â”‚ - Confluenceâ”‚    â”‚
â”‚  â”‚ - Registry â”‚          â”‚ - Custom    â”‚          â”‚             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                    â”‚
â”‚                                    â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                   Local Development Environment                  â”‚   â”‚
â”‚  â”‚  - File System Access       - Git Operations                    â”‚   â”‚
â”‚  â”‚  - Test Execution           - Build Commands                    â”‚   â”‚
â”‚  â”‚              (via Local Agent / CLI)                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Key Design Principles

1. **Local Execution** - All code runs on user's machine, not cloud sandbox
2. **Engine Agnostic** - Plug in any AI: Claude, Aider, OpenHands, etc.
3. **Process Driven** - Every task follows 17-step SDLC
4. **Human in Loop** - Configurable approval gates
5. **Standards Based** - Engineering standards enforced
6. **Learn & Improve** - Lessons learned feed back into system

---

## 4. Architecture

### 4.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              User                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Web Application (UI)                              â”‚
â”‚                        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  Tech: Next.js 15 / React 19 (built via Builder.io from Figma/specs)   â”‚
â”‚  Hosting: Vercel / AWS Amplify                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          HTTPS / WebSocket
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VISHKAR API Server                               â”‚
â”‚                         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  Tech: FastAPI (Python) or Node.js                                      â”‚
â”‚  Hosting: AWS ECS / EKS                                                 â”‚
â”‚                                                                         â”‚
â”‚  Responsibilities:                                                      â”‚
â”‚  - Workflow orchestration (SDLC step management)                        â”‚
â”‚  - State persistence (PostgreSQL)                                       â”‚
â”‚  - Execution engine abstraction                                         â”‚
â”‚  - WebSocket for real-time updates                                      â”‚
â”‚  - Integration with JIRA, GitHub, Confluence                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                    â”‚                    â”‚
              â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    VISHKAR MCPs     â”‚ â”‚   Local Agent   â”‚ â”‚    External APIs    â”‚
â”‚    â•â•â•â•â•â•â•â•â•â•â•      â”‚ â”‚   â•â•â•â•â•â•â•â•â•â•â•   â”‚ â”‚    â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                     â”‚ â”‚                 â”‚ â”‚                     â”‚
â”‚ - Enhanced Context  â”‚ â”‚ Runs on user's  â”‚ â”‚ - JIRA API          â”‚
â”‚ - Project Registry  â”‚ â”‚ machine:        â”‚ â”‚ - GitHub API        â”‚
â”‚ - JIRA MCP          â”‚ â”‚                 â”‚ â”‚ - Confluence API    â”‚
â”‚ - Confluence MCP    â”‚ â”‚ - File system   â”‚ â”‚ - Claude API        â”‚
â”‚                     â”‚ â”‚ - Git commands  â”‚ â”‚ - OpenAI API        â”‚
â”‚ Hosting: Vercel     â”‚ â”‚ - Shell exec    â”‚ â”‚                     â”‚
â”‚                     â”‚ â”‚ - Test runner   â”‚ â”‚                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Local Development Environment                         â”‚
â”‚                    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                          â”‚
â”‚                                                                         â”‚
â”‚  /project-root                                                          â”‚
â”‚  â”œâ”€â”€ .vishkar/              # VISHKAR local config & cache              â”‚
â”‚  â”‚   â”œâ”€â”€ config.yaml        # Engine config, project settings           â”‚
â”‚  â”‚   â”œâ”€â”€ session.json       # Current session state                     â”‚
â”‚  â”‚   â””â”€â”€ cache/             # Codebase understanding cache              â”‚
â”‚  â”œâ”€â”€ .standards/            # Engineering standards (from MCP)          â”‚
â”‚  â”œâ”€â”€ .reviews/              # Review findings                           â”‚
â”‚  â””â”€â”€ src/                   # Project source code                       â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Communication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web    â”‚â”€â”€â”€â”€â–¶â”‚  VISHKAR â”‚â”€â”€â”€â”€â–¶â”‚  Local   â”‚â”€â”€â”€â”€â–¶â”‚  Local   â”‚
â”‚    UI    â”‚     â”‚   API    â”‚     â”‚  Agent   â”‚     â”‚  Files   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                â”‚                â”‚
     â”‚   WebSocket    â”‚   WebSocket    â”‚   File I/O    â”‚
     â”‚   (real-time)  â”‚   (tunnel)     â”‚   Git, Shell  â”‚
     â”‚                â”‚                â”‚                â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      Bidirectional Communication
```

### 4.3 Local Agent Architecture

The Local Agent runs on the user's machine and handles:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VISHKAR Local Agent                             â”‚
â”‚                          â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                             â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Connection Manager                           â”‚   â”‚
â”‚  â”‚  - WebSocket connection to VISHKAR API                          â”‚   â”‚
â”‚  â”‚  - Heartbeat & reconnection                                     â”‚   â”‚
â”‚  â”‚  - Message queue                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                   â”‚                                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â–¼                         â–¼                         â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   File      â”‚          â”‚   Engine    â”‚          â”‚   Git       â”‚    â”‚
â”‚  â”‚   Manager   â”‚          â”‚   Adapter   â”‚          â”‚   Manager   â”‚    â”‚
â”‚  â”‚             â”‚          â”‚             â”‚          â”‚             â”‚    â”‚
â”‚  â”‚ - Read      â”‚          â”‚ - Claude    â”‚          â”‚ - Status    â”‚    â”‚
â”‚  â”‚ - Write     â”‚          â”‚ - Aider     â”‚          â”‚ - Commit    â”‚    â”‚
â”‚  â”‚ - Search    â”‚          â”‚ - OpenHands â”‚          â”‚ - Branch    â”‚    â”‚
â”‚  â”‚ - Watch     â”‚          â”‚ - Execute   â”‚          â”‚ - Push      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Execution Sandbox                            â”‚   â”‚
â”‚  â”‚  - Shell command execution                                      â”‚   â”‚
â”‚  â”‚  - Test runner                                                  â”‚   â”‚
â”‚  â”‚  - Build commands                                               â”‚   â”‚
â”‚  â”‚  - Security: Allowlist of commands, no network by default      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Core Components

### 5.1 Component Overview

| Component | Description | MVP | Future |
|-----------|-------------|-----|--------|
| **Web UI** | React/Next.js application for user interaction | Yes | Enhanced |
| **VISHKAR API** | Backend orchestration and state management | Yes | Scale |
| **Local Agent** | CLI/daemon running on user's machine | Yes | Enhanced |
| **Engine Adapters** | Abstraction for Claude, Aider, OpenHands | Yes | More engines |
| **VISHKAR MCPs** | MCP servers for SDLC, agents, standards | Exists | Enhanced |
| **Integration Layer** | JIRA, GitHub, Confluence connectors | Yes | More integrations |

### 5.2 Web UI Component

```
Purpose: User interface for VISHKAR Framework
Technology: Next.js 15, React 19, TypeScript
Build Method: Builder.io (from Figma designs or specifications)
Hosting: Vercel or AWS Amplify

Key Features:
â”œâ”€â”€ Authentication
â”‚   â”œâ”€â”€ Login / Register
â”‚   â””â”€â”€ API Key management
â”œâ”€â”€ Project Management
â”‚   â”œâ”€â”€ Create project
â”‚   â”œâ”€â”€ Configure execution engine
â”‚   â””â”€â”€ Set standards
â”œâ”€â”€ Task Workflow
â”‚   â”œâ”€â”€ JIRA integration (pull tasks)
â”‚   â”œâ”€â”€ Chat interface (freeform tasks)
â”‚   â””â”€â”€ PR review trigger
â”œâ”€â”€ SDLC Visualization
â”‚   â”œâ”€â”€ 17-step pipeline view
â”‚   â”œâ”€â”€ Current step indicator
â”‚   â””â”€â”€ Step history
â”œâ”€â”€ Code View
â”‚   â”œâ”€â”€ File tree
â”‚   â”œâ”€â”€ Diff viewer
â”‚   â””â”€â”€ Accept/Reject changes
â”œâ”€â”€ Review Dashboard
â”‚   â”œâ”€â”€ 4-angle review results
â”‚   â”œâ”€â”€ Findings by severity
â”‚   â””â”€â”€ Fix suggestions
â””â”€â”€ Standards Browser
    â”œâ”€â”€ View engineering standards
    â””â”€â”€ Lessons learned
```

### 5.3 VISHKAR API Component

```
Purpose: Backend orchestration, state management, integrations
Technology: FastAPI (Python) or Express/Fastify (Node.js)
Hosting: AWS ECS/EKS with RDS PostgreSQL

Key Responsibilities:
â”œâ”€â”€ Workflow Orchestration
â”‚   â”œâ”€â”€ SDLC step management
â”‚   â”œâ”€â”€ Agent selection
â”‚   â””â”€â”€ Approval gate handling
â”œâ”€â”€ State Management
â”‚   â”œâ”€â”€ Project state
â”‚   â”œâ”€â”€ Task progress
â”‚   â”œâ”€â”€ Session history
â”‚   â””â”€â”€ Lessons learned
â”œâ”€â”€ Engine Abstraction
â”‚   â”œâ”€â”€ Engine registry
â”‚   â”œâ”€â”€ Request routing
â”‚   â””â”€â”€ Response normalization
â”œâ”€â”€ Real-time Communication
â”‚   â”œâ”€â”€ WebSocket server
â”‚   â”œâ”€â”€ Event broadcasting
â”‚   â””â”€â”€ Local agent communication
â””â”€â”€ External Integrations
    â”œâ”€â”€ JIRA API
    â”œâ”€â”€ GitHub API
    â”œâ”€â”€ Confluence API
    â””â”€â”€ VISHKAR MCPs
```

### 5.4 Local Agent Component

```
Purpose: Bridge between VISHKAR cloud and local development environment
Technology: Python or Go (for cross-platform binary)
Distribution: pip install, brew, npm, or standalone binary

Key Responsibilities:
â”œâ”€â”€ Connection
â”‚   â”œâ”€â”€ WebSocket tunnel to VISHKAR API
â”‚   â”œâ”€â”€ Authentication
â”‚   â””â”€â”€ Heartbeat
â”œâ”€â”€ File Operations
â”‚   â”œâ”€â”€ Read files
â”‚   â”œâ”€â”€ Write files (with user approval option)
â”‚   â”œâ”€â”€ Search codebase
â”‚   â””â”€â”€ Watch for changes
â”œâ”€â”€ Engine Execution
â”‚   â”œâ”€â”€ Claude API calls
â”‚   â”œâ”€â”€ Aider CLI invocation
â”‚   â”œâ”€â”€ OpenHands container management
â”‚   â””â”€â”€ Response streaming
â”œâ”€â”€ Git Operations
â”‚   â”œâ”€â”€ Status, diff
â”‚   â”œâ”€â”€ Add, commit
â”‚   â”œâ”€â”€ Branch, merge
â”‚   â””â”€â”€ Push (with approval)
â”œâ”€â”€ Test & Build
â”‚   â”œâ”€â”€ Run tests
â”‚   â”œâ”€â”€ Execute build
â”‚   â””â”€â”€ Report results
â””â”€â”€ MCP Communication (v1.1 addition)
    â”œâ”€â”€ Per-MCP timeout configuration
    â”œâ”€â”€ Retry logic (3 attempts, exponential backoff)
    â”œâ”€â”€ Direct HTTP fallback when MCP timeout
    â”œâ”€â”€ Response caching (5min TTL for slow MCPs)
    â””â”€â”€ Error reporting with fallback status
```

---

## 6. User Workflows

### 6.1 Workflow Entry Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Workflow Entry Points                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   JIRA Ticket   â”‚  â”‚  Chat / Prompt  â”‚  â”‚   PR Review     â”‚         â”‚
â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚         â”‚
â”‚  â”‚ User selects    â”‚  â”‚ User describes  â”‚  â”‚ User submits    â”‚         â”‚
â”‚  â”‚ ticket from     â”‚  â”‚ task in natural â”‚  â”‚ code for review â”‚         â”‚
â”‚  â”‚ JIRA board      â”‚  â”‚ language        â”‚  â”‚ before PR       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                    â”‚                    â”‚                   â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                â”‚                                        â”‚
â”‚                                â–¼                                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                   â”‚   VISHKAR Orchestrator  â”‚                          â”‚
â”‚                   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚                          â”‚
â”‚                   â”‚                         â”‚                          â”‚
â”‚                   â”‚   1. Analyze input      â”‚                          â”‚
â”‚                   â”‚   2. Check if greenfieldâ”‚                          â”‚
â”‚                   â”‚      or existing        â”‚                          â”‚
â”‚                   â”‚   3. Load standards     â”‚                          â”‚
â”‚                   â”‚   4. Start SDLC         â”‚                          â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 JIRA Ticket Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        JIRA Ticket Workflow                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Step 1: Connect JIRA                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  User configures JIRA credentials in VISHKAR                           â”‚
â”‚                                                                        â”‚
â”‚  Step 2: Browse & Select                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  JIRA Tasks                              Filter: [Sprint 5 â–¼]â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚  â”‚  â˜ V1-49  FastAPI Project Setup               Ready         â”‚     â”‚
â”‚  â”‚  â˜ V1-50  SQLAlchemy Models                   Ready         â”‚     â”‚
â”‚  â”‚  â˜ V1-51  Pydantic Schemas                    Ready         â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  [Start Selected Task]                                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                        â”‚
â”‚  Step 3: VISHKAR Processes                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  - Fetches ticket details from JIRA                                    â”‚
â”‚  - Analyzes acceptance criteria                                        â”‚
â”‚  - Loads relevant standards                                            â”‚
â”‚  - Initiates 17-step SDLC                                             â”‚
â”‚                                                                        â”‚
â”‚  Step 4: Execute with Approvals                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚  User reviews and approves each phase                                  â”‚
â”‚                                                                        â”‚
â”‚  Step 5: Update JIRA                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  - Transition ticket status                                            â”‚
â”‚  - Log work time                                                       â”‚
â”‚  - Add implementation notes                                            â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 Chat/Prompt Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Chat/Prompt Workflow                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  ğŸ’¬ Chat                                                      â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  ğŸ‘¤ Add user authentication with JWT tokens to the API.     â”‚     â”‚
â”‚  â”‚     Should include login, logout, and token refresh.        â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  ğŸ¤– I'll implement JWT authentication for your API.         â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚     Analyzing requirements...                                â”‚     â”‚
â”‚  â”‚     âœ“ Feature: User authentication                          â”‚     â”‚
â”‚  â”‚     âœ“ Scope: 3 endpoints (login, logout, refresh)           â”‚     â”‚
â”‚  â”‚     âœ“ Tech: JWT with python-jose                            â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚     Starting 17-step SDLC:                                   â”‚     â”‚
â”‚  â”‚     [Step 1/17: Task Analysis] â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‹   â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚     Creating JIRA ticket for tracking? [Yes] [No, continue] â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                        â”‚
â”‚  Note: User can optionally create a JIRA ticket for tracking           â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.4 PR Review Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PR Review Workflow                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  Trigger: User submits code for review before creating PR              â”‚
â”‚                                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Review Request                                               â”‚     â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  Branch: feature/add-auth                                    â”‚     â”‚
â”‚  â”‚  Changed Files: 8                                            â”‚     â”‚
â”‚  â”‚  Commits: 3                                                  â”‚     â”‚
â”‚  â”‚                                                              â”‚     â”‚
â”‚  â”‚  [Run 4-Angle Review]                                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                        â”‚
â”‚  VISHKAR executes:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Architecture    â”‚ â”‚ Security        â”‚                              â”‚
â”‚  â”‚ Review          â”‚ â”‚ Review          â”‚                              â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚                              â”‚
â”‚  â”‚ Agent: arch-rev â”‚ â”‚ Agent: sec-aud  â”‚                              â”‚
â”‚  â”‚ Findings: 2     â”‚ â”‚ Findings: 1 ğŸ”´  â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Code Quality    â”‚ â”‚ Tech Stack      â”‚                              â”‚
â”‚  â”‚ Review          â”‚ â”‚ Review          â”‚                              â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚                              â”‚
â”‚  â”‚ Agent: code-rev â”‚ â”‚ Agent: fastapi  â”‚                              â”‚
â”‚  â”‚ Findings: 3     â”‚ â”‚ Findings: 0 âœ“   â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                        â”‚
â”‚  Summary: 1 critical (must fix), 5 suggestions                        â”‚
â”‚  [View Details] [Auto-Fix Critical] [Proceed to PR]                   â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.5 Complete SDLC Flow (17 Steps - Updated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     17-Step SDLC Workflow (v1.1)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                        â”‚
â”‚  TASK SELECTION PHASE                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  [1] Task Selection (PM Agent)                                         â”‚
â”‚      â””â”€â”€ Select from JIRA, transition to "In Progress"                â”‚
â”‚                                                                        â”‚
â”‚  IMPLEMENTATION PHASE                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  [2] Implementation (Dev Agent)                                        â”‚
â”‚      â””â”€â”€ Load lessons learned from .reviews/lessons_learned.json      â”‚
â”‚      â””â”€â”€ Execute via chosen engine (Claude/Aider/OpenHands)           â”‚
â”‚                                                                        â”‚
â”‚  4-ANGLE INTERNAL REVIEW PHASE                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚  [3] Architecture Review â”€â”€â–¶ [4] Security Review                      â”‚
â”‚         â”‚                          â”‚                                   â”‚
â”‚         â””â”€â”€ System design,         â””â”€â”€ OWASP Top 10, Auth,            â”‚
â”‚             scalability,               input validation                â”‚
â”‚             tech debt                                                  â”‚
â”‚                                                                        â”‚
â”‚  [5] Code Quality Review â”€â”€â–¶ [6] Tech-Stack Review                    â”‚
â”‚         â”‚                          â”‚                                   â”‚
â”‚         â””â”€â”€ SOLID, clean code,     â””â”€â”€ Framework patterns,            â”‚
â”‚             DRY, error handling        async, caching                  â”‚
â”‚                                                                        â”‚
â”‚  âš ï¸  Quality Gate: 0 Critical, 0 High issues to proceed               â”‚
â”‚                                                                        â”‚
â”‚  FEEDBACK PHASE                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚  [7] Feedback Implementation & Storage                                 â”‚
â”‚      â””â”€â”€ Fix findings, store to .reviews/findings/{task_id}.json      â”‚
â”‚      â””â”€â”€ Update .reviews/lessons_learned.json                         â”‚
â”‚                                                                        â”‚
â”‚  TESTING PHASE                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚  [8] Manual Verification (optional)                                    â”‚
â”‚  [9] Create Test Cases â”€â”€â–¶ [10] Implement Tests â”€â”€â–¶ [11] Execute      â”‚
â”‚                                                                        â”‚
â”‚  âš ï¸  Quality Gate: â‰¥90% pass rate, â‰¥80% coverage                      â”‚
â”‚                                                                        â”‚
â”‚  PR & REVIEW PHASE                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  [12] PR Creation (Dev Agent)                                          â”‚
â”‚       â””â”€â”€ Create PR with SDLC summary                                 â”‚
â”‚                                                                        â”‚
â”‚  [13] PR Review - Formal (PR Review Agent)                             â”‚
â”‚       â””â”€â”€ PR-Agent on Docker port 8188                                â”‚
â”‚       â””â”€â”€ Phases: pr_describe â†’ pr_review â†’ pr_improve                â”‚
â”‚                                                                        â”‚
â”‚  [14] PR Feedback Implementation âš ï¸ MANDATORY                          â”‚
â”‚       â””â”€â”€ Fetch suggestions via gh api                                â”‚
â”‚       â””â”€â”€ Triage each (accept/reject with reason)                     â”‚
â”‚       â””â”€â”€ Implement accepted, commit with: fix: {desc} (PR-Agent)     â”‚
â”‚       â””â”€â”€ Resolve threads via GraphQL                                 â”‚
â”‚       â””â”€â”€ Verify CI checks pass                                       â”‚
â”‚                                                                        â”‚
â”‚  MERGE & DEPLOY PHASE                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  [15] CI/CD Pipeline                                                   â”‚
â”‚       â””â”€â”€ All checks must be green                                    â”‚
â”‚                                                                        â”‚
â”‚  [16] Human Merge Approval  â­ ONLY HUMAN GATE                         â”‚
â”‚       â””â”€â”€ Final human sign-off before merge                           â”‚
â”‚                                                                        â”‚
â”‚  [17] Story Closure (PM Agent)                                         â”‚
â”‚       â””â”€â”€ Transition JIRA to "Done"                                   â”‚
â”‚       â””â”€â”€ Log work time                                               â”‚
â”‚       â””â”€â”€ Update documentation                                        â”‚
â”‚                                                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚  ğŸ”„ Throughout: Lessons captured â†’ .reviews/lessons_learned.json      â”‚
â”‚  ğŸ“ Findings stored â†’ .reviews/findings/{task_id}_findings.json       â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Execution Engine Abstraction

### 7.1 Engine Interface

```typescript
// TypeScript interface for execution engines

interface ExecutionEngine {
  // Metadata
  name: string;                    // "claude", "aider", "openhands"
  version: string;

  // Capabilities
  capabilities: EngineCapabilities;

  // Core operations
  generateCode(request: CodeGenRequest): Promise<CodeGenResponse>;
  editCode(request: EditRequest): Promise<EditResponse>;
  reviewCode(request: ReviewRequest): Promise<ReviewResponse>;
  chat(request: ChatRequest): Promise<ChatResponse>;

  // Lifecycle
  initialize(config: EngineConfig): Promise<void>;
  shutdown(): Promise<void>;

  // Status
  getStatus(): EngineStatus;
}

interface EngineCapabilities {
  supportsStreaming: boolean;
  supportsMultiFile: boolean;
  supportsWebBrowsing: boolean;
  supportsShellExecution: boolean;
  maxContextTokens: number;
  supportedLanguages: string[];
}

interface CodeGenRequest {
  prompt: string;
  context: FileContext[];
  standards?: string;           // Engineering standards to follow
  constraints?: string[];       // Specific constraints
}

interface CodeGenResponse {
  files: FileChange[];
  explanation: string;
  tokensUsed: number;
}

interface FileChange {
  path: string;
  action: "create" | "modify" | "delete";
  content?: string;
  diff?: string;
}
```

### 7.2 Engine Implementations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Execution Engine Adapters                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Claude Adapter                               â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚  Implementation: Direct API calls to Claude API                 â”‚   â”‚
â”‚  â”‚  Config: API key, model selection (opus, sonnet, haiku)        â”‚   â”‚
â”‚  â”‚  Pros: High quality, multimodal, tool use                      â”‚   â”‚
â”‚  â”‚  Cons: Cost, rate limits                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Aider Adapter                                â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚  Implementation: CLI invocation, parse output                   â”‚   â”‚
â”‚  â”‚  Config: Model backend (Claude, GPT, local), repo path         â”‚   â”‚
â”‚  â”‚  Pros: Git-aware, proven for code editing                      â”‚   â”‚
â”‚  â”‚  Cons: CLI-based, less control                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     OpenHands Adapter                            â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚  Implementation: Docker container, WebSocket communication      â”‚   â”‚
â”‚  â”‚  Config: Container image, model backend, sandbox settings      â”‚   â”‚
â”‚  â”‚  Pros: Full autonomy, web browsing, shell access               â”‚   â”‚
â”‚  â”‚  Cons: Resource heavy, complex setup                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Custom Engine (Extensible)                   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚  Implementation: User-provided adapter following interface      â”‚   â”‚
â”‚  â”‚  Use case: Local LLMs, custom solutions, Cursor, etc.          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 Engine Configuration

```yaml
# .vishkar/config.yaml - Local configuration

project:
  name: "pulse-context-agent"
  type: "backend"  # backend, frontend, fullstack
  standards_version: "1.0.0"

execution_engine:
  default: "claude"

  engines:
    claude:
      enabled: true
      api_key: "${ANTHROPIC_API_KEY}"  # From env
      model: "claude-sonnet-4-20250514"
      max_tokens: 8192

    aider:
      enabled: true
      model: "claude-3-5-sonnet"
      auto_commit: false

    openhands:
      enabled: false
      container_image: "ghcr.io/all-hands-ai/openhands:latest"
      sandbox_enabled: true

approval_gates:
  implementation: false        # Auto-approve implementation
  architecture_review: true    # Require approval
  security_review: true        # Require approval
  pr_creation: true           # Require approval
  merge: true                 # Require approval

integrations:
  jira:
    enabled: true
    project_key: "PULSE"
  github:
    enabled: true
    repo: "org/pulse-context-agent"
```

---

## 8. UI Specifications

### 8.1 UI Technology Stack

```
Framework: Next.js 15 (App Router)
UI Library: React 19
Styling: Tailwind CSS
Components: shadcn/ui
Build Tool: Builder.io (from Figma or specifications)
State: Zustand or Redux Toolkit
Real-time: Socket.io client
```

### 8.2 UI Layout: Mission Control (Concept A)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”                                                                    â”‚
â”‚  â”‚LOGO â”‚  VISHKAR                    [Project â–¼]  [Engine â–¼]  [ğŸ‘¤ User]    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              â”‚                                                              â”‚
â”‚   SDLC       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   Pipeline   â”‚   â”‚  Task: V1-49 FastAPI Project Setup                 â”‚    â”‚
â”‚   â•â•â•â•â•â•â•â•   â”‚   â”‚  Status: Implementation  â€¢  Engine: Claude         â”‚    â”‚
â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                                              â”‚
â”‚  â”‚1 Selectâ”‚âœ“ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                      â”‚                             â”‚    â”‚
â”‚       â”‚      â”‚   â”‚   Activity Feed      â”‚      Code Preview           â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚      â•â•â•â•â•â•â•â•â•â•â•â•           â”‚    â”‚
â”‚  â”‚2 Plan  â”‚âœ“ â”‚   â”‚                      â”‚                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚   ğŸ¤– Analyzing task  â”‚      src/main.py            â”‚    â”‚
â”‚       â”‚      â”‚   â”‚      requirements... â”‚      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚                      â”‚      1  from fastapi...     â”‚    â”‚
â”‚  â”‚3 Impl  â”‚â— â”‚   â”‚   ğŸ”§ Loading eng.    â”‚      2                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚      standards...    â”‚      3  app = FastAPI(      â”‚    â”‚
â”‚       â”‚      â”‚   â”‚                      â”‚      4      title="..."     â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚   ğŸ“ Creating files: â”‚      5  )                   â”‚    â”‚
â”‚  â”‚4 Arch  â”‚â—‹ â”‚   â”‚      â€¢ src/main.py   â”‚                             â”‚    â”‚
â”‚  â”‚ Review â”‚  â”‚   â”‚      â€¢ src/api/...   â”‚      [Full Screen] [Diff]   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚                      â”‚                             â”‚    â”‚
â”‚       â”‚      â”‚   â”‚   â³ Writing code... â”‚                             â”‚    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚                      â”‚                             â”‚    â”‚
â”‚  â”‚5 Sec   â”‚â—‹ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”‚ Review â”‚  â”‚                                                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚       â”‚      â”‚   â”‚  Actions                                           â”‚    â”‚
â”‚     ...      â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€                                           â”‚    â”‚
â”‚              â”‚   â”‚  [â¸ Pause] [â¹ Stop] [âœ“ Approve Step] [ğŸ’¬ Comment]â”‚    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              â”‚                                                              â”‚
â”‚   Tasks      â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â•â•â•â•â•      â”‚   â”‚  Chat                                              â”‚    â”‚
â”‚              â”‚   â”‚  â”€â”€â”€â”€                                              â”‚    â”‚
â”‚   â— V1-49    â”‚   â”‚                                                    â”‚    â”‚
â”‚   â—‹ V1-50    â”‚   â”‚  ğŸ‘¤ Focus on the health endpoints first          â”‚    â”‚
â”‚   â—‹ V1-51    â”‚   â”‚                                                    â”‚    â”‚
â”‚              â”‚   â”‚  ğŸ¤– Understood. I'll implement health, ready,     â”‚    â”‚
â”‚   [+ New]    â”‚   â”‚     live, and info endpoints...                   â”‚    â”‚
â”‚              â”‚   â”‚                                                    â”‚    â”‚
â”‚              â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [Send] â”‚    â”‚
â”‚              â”‚   â”‚  â”‚ Type a message...                    â”‚         â”‚    â”‚
â”‚              â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 UI Layout: Chat-Centric (Concept B)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VISHKAR                            [pulse-context-agent]     [âš™ï¸] [ğŸ‘¤]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   Context Panel           â”‚
â”‚  â”‚  ğŸ‘¤ Implement V1-49: FastAPI Project    â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•           â”‚
â”‚  â”‚     Setup according to JIRA specs       â”‚   â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   Project: pulse-context  â”‚
â”‚                                                 â”‚   Engine: Claude Sonnet   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   Standards: v1.0.0       â”‚
â”‚  â”‚  ğŸ¤– Starting 17-step SDLC for V1-49     â”‚   â”‚                           â”‚
â”‚  â”‚                                         â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   SDLC Progress           â”‚
â”‚  â”‚  â”‚  SDLC Progress                    â”‚ â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚ â”‚   â”‚                           â”‚
â”‚  â”‚  â”‚  [âœ“] Task Analysis                â”‚ â”‚   â”‚   Step 3 of 17            â”‚
â”‚  â”‚  â”‚  [âœ“] Context & Standards          â”‚ â”‚   â”‚   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 18%     â”‚
â”‚  â”‚  â”‚  [â—] Implementation               â”‚ â”‚   â”‚                           â”‚
â”‚  â”‚  â”‚  [ ] Architecture Review          â”‚ â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚  â”‚  [ ] Security Review              â”‚ â”‚   â”‚   Files Changed           â”‚
â”‚  â”‚  â”‚  ...                              â”‚ â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                           â”‚
â”‚  â”‚                                         â”‚   â”‚   ğŸ“„ src/main.py (new)    â”‚
â”‚  â”‚  Creating FastAPI application...        â”‚   â”‚   ğŸ“„ src/api/v1/... (new) â”‚
â”‚  â”‚                                         â”‚   â”‚   ğŸ“„ src/core/... (mod)   â”‚
â”‚  â”‚  Files being created:                   â”‚   â”‚                           â”‚
â”‚  â”‚  â”œâ”€â”€ src/main.py                       â”‚   â”‚   [View All Changes]      â”‚
â”‚  â”‚  â”œâ”€â”€ src/api/v1/health.py              â”‚   â”‚                           â”‚
â”‚  â”‚  â””â”€â”€ src/core/config.py                â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚                                         â”‚   â”‚   Review Findings         â”‚
â”‚  â”‚  â³ Writing src/main.py...             â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚                                         â”‚   â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   Pending review...       â”‚
â”‚                                                 â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚                                         â”‚   â”‚   Quick Actions           â”‚
â”‚  â”‚  Type instructions or ask questions...  â”‚   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  â”‚                                    [â–¶ï¸] â”‚   â”‚                           â”‚
â”‚  â”‚                                         â”‚   â”‚   [â¸ Pause]               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   [Skip to Review]        â”‚
â”‚                                                 â”‚   [View Standards]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.4 Key UI Components

| Component | Purpose | Priority |
|-----------|---------|----------|
| **SDLC Pipeline** | Visual progress through 17 steps | MVP |
| **Activity Feed** | Real-time log of agent actions | MVP |
| **Code Preview** | View generated/modified code | MVP |
| **Diff Viewer** | Before/after comparison | MVP |
| **Chat Interface** | User instructions and Q&A | MVP |
| **Review Dashboard** | 4-angle findings display | MVP |
| **File Tree** | Navigate changed files | MVP |
| **Task List** | JIRA tasks or custom tasks | MVP |
| **Standards Browser** | View engineering standards | Phase 2 |
| **Lessons Learned** | View accumulated learnings | Phase 2 |
| **Engine Selector** | Switch execution engines | Phase 2 |
| **Team View** | Collaboration features | Future |

### 8.5 Builder.io Integration

```
Workflow:
1. Design in Figma (or describe in specs)
2. Import to Builder.io
3. Builder.io generates React/Next.js components
4. Export and integrate with VISHKAR codebase
5. Connect to VISHKAR API via hooks/services

Benefits:
- Rapid UI iteration
- Non-developers can update UI
- Consistent design system
- Responsive by default
```

---

## 9. API Design

### 9.1 API Overview

```
Base URL: https://api.vishkar.dev/v1

Authentication: Bearer token (API key)

Endpoints:
â”œâ”€â”€ /auth                    # Authentication
â”œâ”€â”€ /projects                # Project management
â”œâ”€â”€ /tasks                   # Task management
â”œâ”€â”€ /workflow                # SDLC workflow
â”œâ”€â”€ /engines                 # Execution engines
â”œâ”€â”€ /reviews                 # Code reviews
â”œâ”€â”€ /standards               # Engineering standards
â”œâ”€â”€ /integrations            # External integrations
â””â”€â”€ /ws                      # WebSocket connection
```

### 9.2 Key Endpoints

```yaml
# Project Management
POST   /projects                    # Create project
GET    /projects                    # List projects
GET    /projects/{id}               # Get project
PATCH  /projects/{id}               # Update project
DELETE /projects/{id}               # Delete project
POST   /projects/{id}/connect-agent # Connect local agent

# Task Management
POST   /tasks                       # Create task (from chat)
GET    /tasks                       # List tasks
GET    /tasks/{id}                  # Get task
POST   /tasks/import-jira           # Import from JIRA
PATCH  /tasks/{id}                  # Update task

# Workflow Management
POST   /workflow/start              # Start SDLC for task
GET    /workflow/{id}               # Get workflow status
POST   /workflow/{id}/approve       # Approve current step
POST   /workflow/{id}/reject        # Reject/request changes
POST   /workflow/{id}/pause         # Pause workflow
POST   /workflow/{id}/resume        # Resume workflow
POST   /workflow/{id}/skip          # Skip to specific step

# Execution
POST   /execute/generate            # Generate code
POST   /execute/edit                # Edit code
POST   /execute/review              # Run review
POST   /execute/test                # Run tests

# Reviews
GET    /reviews/{workflow_id}       # Get review findings
POST   /reviews/{workflow_id}/fix   # Auto-fix findings

# Standards
GET    /standards                   # Get all standards
GET    /standards/{section}         # Get specific section

# Integrations
GET    /integrations/jira/projects  # List JIRA projects
GET    /integrations/jira/issues    # List JIRA issues
POST   /integrations/github/pr      # Create PR
```

### 9.3 WebSocket Events

```typescript
// Client â†’ Server
interface ClientEvents {
  "auth": { token: string };
  "subscribe:workflow": { workflowId: string };
  "subscribe:project": { projectId: string };
  "chat:message": { workflowId: string; message: string };
  "workflow:approve": { workflowId: string; stepId: string };
  "workflow:reject": { workflowId: string; stepId: string; reason: string };
}

// Server â†’ Client
interface ServerEvents {
  "workflow:step:started": { workflowId: string; step: Step };
  "workflow:step:progress": { workflowId: string; step: Step; progress: number };
  "workflow:step:completed": { workflowId: string; step: Step; result: any };
  "workflow:step:failed": { workflowId: string; step: Step; error: string };
  "workflow:approval:required": { workflowId: string; step: Step };
  "file:created": { workflowId: string; path: string; content: string };
  "file:modified": { workflowId: string; path: string; diff: string };
  "review:finding": { workflowId: string; finding: Finding };
  "chat:response": { workflowId: string; message: string };
  "agent:status": { projectId: string; status: "connected" | "disconnected" };
}
```

---

## 10. Data Model

### 10.1 Core Entities

```sql
-- Projects
CREATE TABLE projects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    type VARCHAR(50) NOT NULL,  -- backend, frontend, fullstack
    repository_url VARCHAR(500),
    standards_version VARCHAR(20) DEFAULT '1.0.0',
    config JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    user_id UUID REFERENCES users(id)
);

-- Tasks
CREATE TABLE tasks (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    external_id VARCHAR(100),  -- JIRA ticket ID
    external_source VARCHAR(50),  -- jira, github, manual
    title VARCHAR(500) NOT NULL,
    description TEXT,
    acceptance_criteria TEXT,
    status VARCHAR(50) DEFAULT 'pending',
    priority VARCHAR(20),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Workflows (SDLC execution)
CREATE TABLE workflows (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id UUID REFERENCES tasks(id),
    current_step INTEGER DEFAULT 1,
    status VARCHAR(50) DEFAULT 'in_progress',
    engine_used VARCHAR(50),
    started_at TIMESTAMPTZ DEFAULT NOW(),
    completed_at TIMESTAMPTZ,
    config JSONB DEFAULT '{}'
);

-- Workflow Steps
CREATE TABLE workflow_steps (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    workflow_id UUID REFERENCES workflows(id),
    step_number INTEGER NOT NULL,
    step_name VARCHAR(100) NOT NULL,
    status VARCHAR(50) DEFAULT 'pending',
    started_at TIMESTAMPTZ,
    completed_at TIMESTAMPTZ,
    result JSONB,
    agent_used VARCHAR(100),
    tokens_used INTEGER DEFAULT 0
);

-- Review Findings
CREATE TABLE review_findings (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    workflow_id UUID REFERENCES workflows(id),
    step_id UUID REFERENCES workflow_steps(id),
    review_type VARCHAR(50) NOT NULL,  -- architecture, security, quality, tech
    severity VARCHAR(20) NOT NULL,  -- critical, high, medium, low
    category VARCHAR(100),
    issue TEXT NOT NULL,
    file_path VARCHAR(500),
    line_number INTEGER,
    suggestion TEXT,
    fixed BOOLEAN DEFAULT FALSE,
    fixed_at TIMESTAMPTZ
);

-- File Changes
CREATE TABLE file_changes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    workflow_id UUID REFERENCES workflows(id),
    step_id UUID REFERENCES workflow_steps(id),
    file_path VARCHAR(500) NOT NULL,
    action VARCHAR(20) NOT NULL,  -- create, modify, delete
    content TEXT,
    diff TEXT,
    approved BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Lessons Learned
CREATE TABLE lessons_learned (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    project_id UUID REFERENCES projects(id),
    category VARCHAR(100) NOT NULL,
    severity VARCHAR(20) NOT NULL,
    pattern TEXT NOT NULL,
    problem TEXT NOT NULL,
    solution TEXT NOT NULL,
    source_task_id UUID REFERENCES tasks(id),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Chat Messages
CREATE TABLE chat_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    workflow_id UUID REFERENCES workflows(id),
    role VARCHAR(20) NOT NULL,  -- user, assistant, system
    content TEXT NOT NULL,
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### 10.2 Entity Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User   â”‚â”€â”€â”€â”€â–¶â”‚ Project  â”‚â”€â”€â”€â”€â–¶â”‚   Task   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                      â”‚                â–¼
                      â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚          â”‚ Workflow â”‚
                      â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚                â”‚
                      â–¼                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                 â”‚
               â”‚ Lessons  â”‚           â–¼                 â–¼
               â”‚ Learned  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚Workflow  â”‚     â”‚  Chat    â”‚
                               â”‚  Steps   â”‚     â”‚ Messages â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â–¼                     â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Review   â”‚          â”‚  File    â”‚
                   â”‚ Findings â”‚          â”‚ Changes  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Integration Points

### 11.1 JIRA Integration

```yaml
Purpose: Import tasks, update status, log work

Capabilities:
  - Browse projects and sprints
  - Import issues as tasks
  - Sync task status
  - Log work time
  - Add implementation comments
  - Link PRs to issues

Authentication: OAuth 2.0 or API Token

Endpoints Used:
  - GET /rest/api/3/search (search issues)
  - GET /rest/api/3/issue/{id} (get issue)
  - PUT /rest/api/3/issue/{id} (update issue)
  - POST /rest/api/3/issue/{id}/transitions (change status)
  - POST /rest/api/3/issue/{id}/worklog (log work)
```

### 11.2 GitHub Integration

```yaml
Purpose: Create branches, PRs, manage code

Capabilities:
  - Create feature branches
  - Commit changes
  - Create pull requests
  - Add PR descriptions with SDLC summary
  - Link to JIRA issues

Authentication: GitHub App or Personal Access Token

Endpoints Used:
  - POST /repos/{owner}/{repo}/git/refs (create branch)
  - PUT /repos/{owner}/{repo}/contents/{path} (commit file)
  - POST /repos/{owner}/{repo}/pulls (create PR)
  - GET /repos/{owner}/{repo}/pulls/{number} (get PR)
```

### 11.3 VISHKAR MCPs Integration

```yaml
Purpose: Access SDLC guidance, agents, standards

MCPs:
  - Enhanced Context MCP:
      - get_sdlc_guidance (17-step process)
      - list_vishkar_agents (38 agents)
      - load_vishkar_agent (agent details)
      - get_engineering_standards (standards)
      - get_contextual_agent (auto-select)

  - Project Registry MCP:
      - get_started (entry point)
      - register_project
      - get_project_config

  - JIRA MCP:
      - search_issues, get_issue_details
      - create_issue, update_issue
      - transition_issue, add_comment
      - log_work (worklog)

  - Confluence MCP:
      - get_spaces, search
      - create_page, update_page
      - Note: Uses XHTML storage format (NOT Markdown)

Communication: JSON-RPC over HTTPS
```

### 11.4 MCP Timeout & Resilience (Critical)

```yaml
Problem Discovered:
  Claude Code's MCP client has a hardcoded ~10-15 second timeout that does NOT
  respect MCP_TIMEOUT environment variable settings. HTTP MCPs like JIRA (which
  take ~25s for large responses) timeout silently.

Evidence:
  - MCP_TIMEOUT=120000 (120s) in ~/.claude/settings.json
  - Direct curl to JIRA MCP: 25 seconds â†’ SUCCESS
  - Claude Code mcp__jira__* tool call: TIMEOUT after ~10-15s

Required Solution for Local Agent:
  per_mcp_timeout:
    project_registry: 15000   # Fast, no auth
    enhanced_context: 30000   # Medium
    jira: 60000              # Slow, large payloads
    confluence: 60000        # Slow, XHTML processing

  fallback_strategy:
    enabled: true
    method: "direct_http"    # Fall back to curl/fetch
    retry_attempts: 3
    backoff: "exponential"   # 1s, 2s, 4s

  caching:
    enabled: true
    ttl: 300                 # 5 minutes
    cache_slow_responses: true

Workaround (Current):
  Use curl for MCPs that exceed 15s response time until Claude Code fixes
  the MCP timeout bug. See: docs/bugs/CLAUDE_CODE_MCP_TIMEOUT_BUG.md

Related Issues:
  - GitHub anthropics/claude-code#3033 (SSE timeout - closed)
  - GitHub anthropics/claude-code#424 (MCP timeout - closed)
  - Both closed but HTTP MCP tool timeout still broken
```

---

## 12. Codebase Understanding Module

### 12.1 Purpose

For existing codebases, VISHKAR needs to understand the project before making changes. This module analyzes the codebase and creates artifacts for context.

### 12.2 Analysis Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Codebase Understanding Module                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Input: Project root directory                                          â”‚
â”‚                                                                         â”‚
â”‚  Step 1: Structure Analysis                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  - Detect project type (Python, Node, etc.)                            â”‚
â”‚  - Map directory structure                                              â”‚
â”‚  - Identify entry points                                                â”‚
â”‚  - Find configuration files                                             â”‚
â”‚                                                                         â”‚
â”‚  Step 2: Dependency Analysis                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  - Parse package.json / requirements.txt / etc.                        â”‚
â”‚  - Identify frameworks (FastAPI, Next.js, etc.)                        â”‚
â”‚  - Map external dependencies                                            â”‚
â”‚                                                                         â”‚
â”‚  Step 3: Code Analysis                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  - Extract function/class signatures                                    â”‚
â”‚  - Build call graph (simplified)                                       â”‚
â”‚  - Identify patterns and conventions                                   â”‚
â”‚  - Detect test structure                                               â”‚
â”‚                                                                         â”‚
â”‚  Step 4: Documentation Extraction                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚  - Parse README, docs/                                                 â”‚
â”‚  - Extract docstrings                                                  â”‚
â”‚  - Find API documentation                                              â”‚
â”‚                                                                         â”‚
â”‚  Output: Codebase Context Artifact                                      â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.3 Context Artifact Schema

```json
{
  "schema_version": "1.0.0",
  "project": {
    "name": "pulse-context-agent",
    "type": "backend",
    "language": "python",
    "framework": "fastapi",
    "python_version": "3.12"
  },
  "structure": {
    "source_root": "backend/src",
    "test_root": "backend/tests",
    "entry_points": ["src/main.py"],
    "config_files": [".env", "pyproject.toml"]
  },
  "dependencies": {
    "runtime": ["fastapi", "sqlalchemy", "pydantic"],
    "dev": ["pytest", "ruff", "mypy"]
  },
  "conventions": {
    "naming": "snake_case",
    "imports": "isort",
    "formatting": "black"
  },
  "modules": [
    {
      "path": "src/api",
      "purpose": "API routes and endpoints",
      "key_files": ["v1/health.py", "v1/customers.py"]
    },
    {
      "path": "src/core",
      "purpose": "Core configuration and utilities",
      "key_files": ["config.py", "database.py"]
    }
  ],
  "patterns": {
    "dependency_injection": true,
    "repository_pattern": false,
    "service_layer": true
  }
}
```

---

## 13. Security Considerations

### 13.1 Authentication & Authorization

```yaml
User Authentication:
  - Email/password with bcrypt
  - OAuth 2.0 (Google, GitHub)
  - API keys for programmatic access

Authorization:
  - Project-level permissions
  - Role-based access (future: Owner, Admin, Member)

API Security:
  - Bearer token authentication
  - Rate limiting per user
  - Request validation
```

### 13.2 Local Agent Security

```yaml
Agent Authentication:
  - Project-scoped tokens
  - Token rotation
  - Secure WebSocket (WSS)

Execution Sandbox:
  - Command allowlist
  - No network access by default
  - File system restricted to project
  - User approval for sensitive operations
```

### 13.3 Data Security

```yaml
At Rest:
  - Database encryption
  - Secrets in environment variables
  - No API keys stored in DB

In Transit:
  - HTTPS everywhere
  - WSS for WebSocket

Code Handling:
  - Code NOT stored on server (except temp during workflow)
  - Only metadata and diffs stored
  - User code stays local
```

---

## 14. Deployment Model

### 14.1 Initial: Single-Tenant Self-Hosted

```
User deploys in their own environment:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     User's Infrastructure                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Option A: Docker Compose (Simple)                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚
â”‚  docker-compose up -d                                                   â”‚
â”‚  - vishkar-api (FastAPI)                                               â”‚
â”‚  - vishkar-web (Next.js)                                               â”‚
â”‚  - postgres                                                             â”‚
â”‚  - redis                                                                â”‚
â”‚                                                                         â”‚
â”‚  Option B: Kubernetes (Scalable)                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  kubectl apply -f vishkar/                                             â”‚
â”‚  - Helm charts provided                                                â”‚
â”‚  - Configurable replicas                                               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.2 Future: Multi-Tenant SaaS

```
VISHKAR managed infrastructure:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AWS Infrastructure                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Region: us-east-1 (primary), eu-west-1 (secondary)                    â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   CloudFront    â”‚  â”‚   API Gateway   â”‚  â”‚    Route 53     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                    â”‚                    â”‚                   â”‚
â”‚           â–¼                    â–¼                    â”‚                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
â”‚  â”‚    S3 + Web     â”‚  â”‚   ECS/Fargate   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚  â”‚   (Next.js)     â”‚  â”‚   (API Server)  â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                â”‚                                        â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚           â–¼                    â–¼                    â–¼                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   RDS Postgres  â”‚  â”‚  ElastiCache    â”‚  â”‚    Secrets      â”‚        â”‚
â”‚  â”‚  (Multi-tenant) â”‚  â”‚   (Redis)       â”‚  â”‚    Manager      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 15. MVP vs Future Roadmap

### 15.1 MVP Scope (Phase 1)

```
Must Have:
â”œâ”€â”€ Web UI (Builder.io generated)
â”‚   â”œâ”€â”€ Chat interface
â”‚   â”œâ”€â”€ SDLC visualization (17 steps with gates)
â”‚   â”œâ”€â”€ Code preview & diff
â”‚   â””â”€â”€ Review dashboard (4-angle findings)
â”œâ”€â”€ VISHKAR API
â”‚   â”œâ”€â”€ Workflow orchestration
â”‚   â”œâ”€â”€ State management
â”‚   â””â”€â”€ WebSocket real-time
â”œâ”€â”€ Local Agent
â”‚   â”œâ”€â”€ File system access
â”‚   â”œâ”€â”€ Git operations
â”‚   â”œâ”€â”€ Engine execution
â”‚   â””â”€â”€ MCP communication with resilience (v1.1)
â”œâ”€â”€ MCP Resilience (v1.1 addition - CRITICAL)
â”‚   â”œâ”€â”€ Per-MCP timeout configuration
â”‚   â”œâ”€â”€ Direct HTTP fallback for slow MCPs
â”‚   â”œâ”€â”€ Retry with exponential backoff
â”‚   â””â”€â”€ Response caching
â”œâ”€â”€ Execution Engines
â”‚   â”œâ”€â”€ Claude adapter
â”‚   â”œâ”€â”€ Aider adapter
â”‚   â””â”€â”€ OpenHands adapter
â”œâ”€â”€ Integrations
â”‚   â”œâ”€â”€ JIRA (import tasks, update status, log work)
â”‚   â”œâ”€â”€ GitHub (create PR)
â”‚   â””â”€â”€ Confluence (documentation)
â””â”€â”€ Standards
    â””â”€â”€ Engineering standards fetch & use

Timeline: TBD (priority project)
```

### 15.2 Phase 2: Enhancement

```
Features:
â”œâ”€â”€ Codebase Understanding Module
â”‚   â””â”€â”€ Auto-analyze existing projects
â”œâ”€â”€ Team Collaboration (Spec only in MVP)
â”‚   â”œâ”€â”€ Shared projects
â”‚   â””â”€â”€ Review assignments
â”œâ”€â”€ More Execution Engines
â”‚   â”œâ”€â”€ Local LLMs (Ollama)
â”‚   â””â”€â”€ Custom adapters
â”œâ”€â”€ Advanced UI
â”‚   â”œâ”€â”€ Standards browser
â”‚   â””â”€â”€ Lessons learned view
â””â”€â”€ Analytics
    â””â”€â”€ Usage metrics, cost tracking
```

### 15.3 Phase 3: Scale

```
Features:
â”œâ”€â”€ Multi-tenant SaaS
â”œâ”€â”€ Enterprise SSO
â”œâ”€â”€ Sandbox Execution (cloud containers)
â”œâ”€â”€ Marketplace (custom agents, standards)
â”œâ”€â”€ API for third-party integrations
â””â”€â”€ Mobile companion app
```

---

## 16. Technical Stack

### 16.1 Recommended Stack

| Layer | Technology | Rationale |
|-------|------------|-----------|
| **Web UI** | Next.js 15, React 19, TypeScript | Modern, fast, Builder.io compatible |
| **Styling** | Tailwind CSS, shadcn/ui | Rapid development, consistent |
| **State** | Zustand | Simple, performant |
| **API Server** | FastAPI (Python) | Async, fast, Python ecosystem |
| **Database** | PostgreSQL 16 | Reliable, JSONB support |
| **Cache** | Redis | Session, real-time pub/sub |
| **Real-time** | WebSocket (FastAPI) | Native support |
| **Local Agent** | Python or Go | Cross-platform |
| **Infrastructure** | Docker, AWS ECS | Scalable |
| **CI/CD** | GitHub Actions | Standard |

### 16.2 Development Tools

```yaml
Code Quality:
  - ESLint, Prettier (frontend)
  - Ruff, mypy (backend)

Testing:
  - Jest, Playwright (frontend)
  - pytest (backend)

Documentation:
  - Storybook (UI components)
  - OpenAPI (API docs)

Monitoring:
  - Sentry (errors)
  - OpenTelemetry (tracing)
```

---

## Appendix A: Glossary

| Term | Definition |
|------|------------|
| **VISHKAR** | AI-powered software development framework |
| **SDLC** | Software Development Lifecycle (17 steps) |
| **4-Angle Review** | Architecture, Security, Quality, Tech-Stack reviews |
| **Execution Engine** | AI that generates/edits code (Claude, Aider, OpenHands) |
| **Local Agent** | CLI/daemon running on user's machine |
| **MCP** | Model Context Protocol server |
| **Workflow** | One execution of SDLC for a task |

---

## Appendix B: Open Questions

1. **Pricing model**: Free tier limits? Usage-based? Subscription?
2. **Engine costs**: Pass-through? Markup? User brings own API keys?
3. **IP ownership**: Clarify code generated by VISHKAR is user's IP
4. **Support model**: Community? Paid support? SLA?

---

## 17. Known Issues & Lessons Learned

### 17.1 Claude Code MCP Timeout Bug

```yaml
Issue: HTTP MCP Tool Calls Ignore MCP_TIMEOUT Setting
Status: Bug report prepared, pending submission to Anthropic

Problem:
  Claude Code's HTTP MCP client has a hardcoded internal timeout (~10-15s)
  that does NOT respect the MCP_TIMEOUT environment variable (even when set
  to 120000ms / 2 minutes).

Evidence:
  | Test | Timeout Setting | Response Time | Result |
  |------|-----------------|---------------|--------|
  | project-registry (no auth) | 120000 | 0.68s | âœ… SUCCESS |
  | jira (Bearer auth) | 120000 | 24.97s | âŒ TIMEOUT |
  | Direct curl to jira | N/A | 24.97s | âœ… SUCCESS |

Root Cause:
  MCP_TIMEOUT in ~/.claude/settings.json appears to only affect server startup,
  not individual HTTP MCP tool calls.

Workaround:
  Use curl for MCPs that take >15s to respond:

  curl -s -X POST "https://jira-mcp-pi.vercel.app/api/mcp" \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer $API_KEY" \
    --data '{"jsonrpc":"2.0","id":1,"method":"tools/call",
             "params":{"name":"search_issues","arguments":{...}}}'

Related GitHub Issues:
  - anthropics/claude-code#3033 (SSE timeout - closed)
  - anthropics/claude-code#424 (MCP timeout configurable - closed)

Impact on VISHKAR:
  Local Agent MUST implement its own HTTP client with configurable timeouts
  rather than relying on Claude Code's MCP tools.
```

### 17.2 PR-Agent Integration Lessons

```yaml
Lesson: PR-Agent Suggestions Are Actionable

Problem Observed:
  Initial implementations treated PR-Agent suggestions as "FYI" comments.
  This led to quality issues shipping to production.

Correct Approach:
  PR-Agent suggestions are ACTIONABLE items that must be:
  1. Triaged (accept with implementation OR reject with documented reason)
  2. Implemented if accepted
  3. Committed with: "fix: {description} (PR-Agent suggestion)"
  4. Threads resolved via GitHub GraphQL API

SDLC Step 14 is MANDATORY - cannot be skipped.
```

### 17.3 Confluence Format Lesson

```yaml
Lesson: Confluence Uses XHTML, Not Markdown

Problem Observed:
  Attempting to create Confluence pages with Markdown content resulted in
  raw markdown being displayed instead of formatted content.

Correct Approach:
  All Confluence content must be in XHTML storage format:

  âŒ Wrong: "# Heading\n\n- Item 1\n- Item 2"

  âœ… Correct: "<h1>Heading</h1><ul><li>Item 1</li><li>Item 2</li></ul>"

  Use ac:structured-macro for code blocks, panels, etc.
```

### 17.4 SDLC Quality Gates

```yaml
Lesson: Quality Gates Cannot Be Skipped

Gates Identified:
  - Steps 3-6 (4-Angle Review): 0 Critical, 0 High issues
  - Step 11 (Test Execution): â‰¥90% pass rate, â‰¥80% coverage
  - Step 14 (PR Feedback): All suggestions triaged
  - Step 15 (CI/CD): All checks green
  - Step 16 (Human Gate): ONLY mandatory human intervention

Automation Note:
  All gates except Step 16 should be automatable with clear pass/fail criteria.
  Step 16 exists specifically because some decisions require human judgment.
```

### 17.5 Lessons Learned Storage Format

```json
{
  "location": ".reviews/lessons_learned.json",
  "schema": {
    "id": "uuid",
    "category": "security|architecture|quality|tech-stack|process",
    "severity": "critical|high|medium|low",
    "pattern": "regex or description of when this applies",
    "problem": "what went wrong",
    "solution": "how to fix it",
    "source_task": "JIRA ticket ID",
    "created_at": "ISO timestamp"
  },
  "usage": "Loaded at Step 2 (Implementation) to prevent repeat mistakes"
}
```

---

## Appendix C: Changelog

| Version | Date | Changes |
|---------|------|---------|
| 1.0.0 | 2024-12-14 | Initial draft |
| 1.1.0 | 2025-12-22 | Added MCP timeout handling, updated SDLC flow, PR-Agent feedback loop, Confluence format notes, lessons learned |

---

*Document Status: Draft - Pending Review*
